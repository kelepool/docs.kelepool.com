<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="keywords" content="ETH2.0 质押, Pos 质押, Pow 挖矿, Mina 质押, Platon 质押"><meta name="description" content="可乐矿池文档 - Pow & Pos 一站式质押管理平台"><title>硬件钱包或APP如何集成质押接口？ | 可乐矿池</title>
    <link rel="modulepreload" href="/assets/app.aa16d652.js"><link rel="modulepreload" href="/assets/Hardware.html.4e0f42da.js"><link rel="modulepreload" href="/assets/Hardware.html.df05188f.js"><link rel="prefetch" href="/assets/index.html.314adaac.js"><link rel="prefetch" href="/assets/index.html.cdbb8480.js"><link rel="prefetch" href="/assets/index.html.a773c827.js"><link rel="prefetch" href="/assets/20220831.html.b9e68595.js"><link rel="prefetch" href="/assets/index.html.0051c481.js"><link rel="prefetch" href="/assets/index.html.4d01ecc8.js"><link rel="prefetch" href="/assets/index.html.6ae9af0c.js"><link rel="prefetch" href="/assets/SUMMARY.html.64445f2d.js"><link rel="prefetch" href="/assets/anonymous-mining.html.76c5460d.js"><link rel="prefetch" href="/assets/index.html.bdf45e58.js"><link rel="prefetch" href="/assets/20220831.html.e61883df.js"><link rel="prefetch" href="/assets/index.html.d12b2740.js"><link rel="prefetch" href="/assets/index.html.9dd1b520.js"><link rel="prefetch" href="/assets/index.html.b2a15a00.js"><link rel="prefetch" href="/assets/index.html.4a3a454b.js"><link rel="prefetch" href="/assets/platform.html.99ca2ae8.js"><link rel="prefetch" href="/assets/index.html.edae8654.js"><link rel="prefetch" href="/assets/index.html.36e72d4f.js"><link rel="prefetch" href="/assets/index.html.92c81ef3.js"><link rel="prefetch" href="/assets/fork.html.f8879dff.js"><link rel="prefetch" href="/assets/kelepool.html.0871e8d4.js"><link rel="prefetch" href="/assets/knowledge.html.8f9e4bfe.js"><link rel="prefetch" href="/assets/merge.html.38d4210a.js"><link rel="prefetch" href="/assets/platform.html.4e4695bd.js"><link rel="prefetch" href="/assets/staking-difference.html.eda76104.js"><link rel="prefetch" href="/assets/staking-guide.html.3569972f.js"><link rel="prefetch" href="/assets/staking-intro.html.7c8abf8f.js"><link rel="prefetch" href="/assets/index.html.95873d4f.js"><link rel="prefetch" href="/assets/anonymous.html.6501dc1f.js"><link rel="prefetch" href="/assets/ladder.html.5a3c8c60.js"><link rel="prefetch" href="/assets/eth-an-quan-shen-ji.html.24f2ed48.js"><link rel="prefetch" href="/assets/terms-of-service.html.e30a0f4a.js"><link rel="prefetch" href="/assets/0x00address.html.64cb317a.js"><link rel="prefetch" href="/assets/index.html.ec5a47a5.js"><link rel="prefetch" href="/assets/aleo.html.d1e1b9d2.js"><link rel="prefetch" href="/assets/fork.html.00d1f77f.js"><link rel="prefetch" href="/assets/kelepool.html.f072d218.js"><link rel="prefetch" href="/assets/knowledge.html.511448bf.js"><link rel="prefetch" href="/assets/merge.html.141e67c9.js"><link rel="prefetch" href="/assets/staking-difference.html.3ec525ae.js"><link rel="prefetch" href="/assets/staking-guide.html.0f054549.js"><link rel="prefetch" href="/assets/staking-intro.html.078422a7.js"><link rel="prefetch" href="/assets/index.html.aa947098.js"><link rel="prefetch" href="/assets/Hardware.html.035b3a51.js"><link rel="prefetch" href="/assets/index.html.ff78c683.js"><link rel="prefetch" href="/assets/knowledge.html.0c75e4e1.js"><link rel="prefetch" href="/assets/index.html.9b125456.js"><link rel="prefetch" href="/assets/index.html.f4e3ee62.js"><link rel="prefetch" href="/assets/index.html.c52be553.js"><link rel="prefetch" href="/assets/index.html.25e5456a.js"><link rel="prefetch" href="/assets/index.html.822f5182.js"><link rel="prefetch" href="/assets/1account-registration-and-login.html.8115bd7a.js"><link rel="prefetch" href="/assets/2add-and-change-sub-accounts.html.55dbdcdb.js"><link rel="prefetch" href="/assets/3check-earnings-and-payment-status.html.ceb602eb.js"><link rel="prefetch" href="/assets/4check-hashrate-and-worker-status.html.2337bd65.js"><link rel="prefetch" href="/assets/5create-edit-and-delete-observer-addresses.html.434f919f.js"><link rel="prefetch" href="/assets/6invite-friends-to-get-rewards.html.a2c14338.js"><link rel="prefetch" href="/assets/7set-hashrate-alert.html.e46d17c3.js"><link rel="prefetch" href="/assets/8set-payment-address.html.344a3252.js"><link rel="prefetch" href="/assets/9supported-currencies-tokens.html.1909f866.js"><link rel="prefetch" href="/assets/index.html.2fce82e8.js"><link rel="prefetch" href="/assets/stake-amount-32-eth-1.html.2f16ced2.js"><link rel="prefetch" href="/assets/stake-amount-32-eth.html.8a966901.js"><link rel="prefetch" href="/assets/index.html.884638af.js"><link rel="prefetch" href="/assets/knowledge.html.771ccd65.js"><link rel="prefetch" href="/assets/index.html.5a763e87.js"><link rel="prefetch" href="/assets/index.html.46f736de.js"><link rel="prefetch" href="/assets/index.html.19bb0a2d.js"><link rel="prefetch" href="/assets/index.html.f3517850.js"><link rel="prefetch" href="/assets/index.html.872906ca.js"><link rel="prefetch" href="/assets/index.html.53e5036e.js"><link rel="prefetch" href="/assets/eth-deposit-cli.html.e69f981c.js"><link rel="prefetch" href="/assets/index.html.f6e70d53.js"><link rel="prefetch" href="/assets/micro-unstake.html.b43ecb44.js"><link rel="prefetch" href="/assets/micro.html.e3b94c67.js"><link rel="prefetch" href="/assets/whale-unstake.html.56918263.js"><link rel="prefetch" href="/assets/whale.html.f133f3eb.js"><link rel="prefetch" href="/assets/withdraw.html.78c06a5f.js"><link rel="prefetch" href="/assets/index.html.a9a27c08.js"><link rel="prefetch" href="/assets/Stake.html.1c5926ff.js"><link rel="prefetch" href="/assets/Staking.html.d8bf1b37.js"><link rel="prefetch" href="/assets/Supported networks.html.98395f4b.js"><link rel="prefetch" href="/assets/cha-kan-shou-yi.html.e7379e86.js"><link rel="prefetch" href="/assets/cha-kan-yan-zheng-jie-dian.html.9ce00778.js"><link rel="prefetch" href="/assets/cha-kan-zhi-ya-jin-du.html.edb7788d.js"><link rel="prefetch" href="/assets/ru-he-jie-chu-zhi-ya.html.08ef9bb3.js"><link rel="prefetch" href="/assets/index.html.418dace0.js"><link rel="prefetch" href="/assets/ledger-install-mina-app.html.3f21b8f0.js"><link rel="prefetch" href="/assets/index.html.e958fdb2.js"><link rel="prefetch" href="/assets/dns-shi-shi-mo-ru-he-xuan-ze-yi-ge-wen-ding-de-dns.html.3fc9e747.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ge-ge-bi-zhong-fei-shuai-shi-duo-shao.html.98d93857.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-shi-mo-shi-jian-jie-suan-da-bi.html.c3a33372.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-shi-yong-na-zhong-shou-yi-mo-shi.html.ef5344b0.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-di-zhi-ke-yi-yong-jiao-yi-suo-di-zhi-ma.html.67cc79ac.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-qi-fueshi-duo-shao.html.96faa42b.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-shou-xu-fei-shi-duo-shao.html.24cb8816.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-zai-hai-wai-you-mei-you-wa-kuang-di-zhi.html.533bf70b.js"><link rel="prefetch" href="/assets/kuang-ti-lian-jie-bu-shang-shi-shi-mo-yuan-yin.html.532ba258.js"><link rel="prefetch" href="/assets/lian-jie-shang-kuang-chi-hou-duo-jiu-ke-yi-kan-dao-suan-li.html.5d7af797.js"><link rel="prefetch" href="/assets/mei-dao-qi-fueke-yi-ti-bi-ma.html.90f81e02.js"><link rel="prefetch" href="/assets/ru-he-pei-zhi-qi-fuedu.html.a1d15391.js"><link rel="prefetch" href="/assets/vpn-he-kuang-ti-you-shi-mo-qu-bie.html.bd3235e6.js"><link rel="prefetch" href="/assets/wei-shi-mo-ke-le-kuang-chi-wang-zhan-da-bu-kai.html.3eb4467b.js"><link rel="prefetch" href="/assets/wei-shi-mo-wo-wa-de-bi-mei-you-zhi-fu.html.1b730e04.js"><link rel="prefetch" href="/assets/BTC.html.974b5322.js"><link rel="prefetch" href="/assets/CKB.html.c30c16ba.js"><link rel="prefetch" href="/assets/ETC.html.bad8a4a7.js"><link rel="prefetch" href="/assets/HNS.html.6cd7ae67.js"><link rel="prefetch" href="/assets/KDA.html.78461307.js"><link rel="prefetch" href="/assets/LTC.html.dcbd0418.js"><link rel="prefetch" href="/assets/index.html.ce8551bb.js"><link rel="prefetch" href="/assets/RVN.html.507df2f4.js"><link rel="prefetch" href="/assets/STC.html.c2ca5814.js"><link rel="prefetch" href="/assets/index.html.5e9f2d67.js"><link rel="prefetch" href="/assets/aceminer-wa-kuang-jiao-cheng.html.8b0377f2.js"><link rel="prefetch" href="/assets/hiveos-wa-kuang-jiao-cheng.html.579b7280.js"><link rel="prefetch" href="/assets/kai-yuan-kuang-gong-wa-kuang-jiao-cheng.html.729c2c13.js"><link rel="prefetch" href="/assets/mineros-wa-kuang-jiao-cheng.html.0057c86f.js"><link rel="prefetch" href="/assets/qing-song-kuang-gong-shi-yong-jiao-cheng.html.b388015b.js"><link rel="prefetch" href="/assets/stcbox-ka-shua-liu-cheng.html.7d1aaa2c.js"><link rel="prefetch" href="/assets/stcbox1.html.0135b772.js"><link rel="prefetch" href="/assets/Supported currency.html.7d972100.js"><link rel="prefetch" href="/assets/account.html.f22df625.js"><link rel="prefetch" href="/assets/cha-kan-shou-yi-zhi-fu-zhuang-tai.html.aa68c3cc.js"><link rel="prefetch" href="/assets/cha-kan-suan-li-kuang-ji-qing-kuang.html.12432898.js"><link rel="prefetch" href="/assets/chuang-jian-xiu-gai-shan-chu-guan-cha-zhe-di-zhi.html.b93971b6.js"><link rel="prefetch" href="/assets/collection.html.6dd0f5cb.js"><link rel="prefetch" href="/assets/warning.html.83b7c42b.js"><link rel="prefetch" href="/assets/yao-qing-hao-you-huo-qu-jiang-li.html.08c22bcc.js"><link rel="prefetch" href="/assets/zhang-hu-zhu-ce-ji-deng-lu.html.cfdaf7a5.js"><link rel="prefetch" href="/assets/zi-zhu-ti-bi.html.daeab1ad.js"><link rel="prefetch" href="/assets/404.html.ce538133.js"><link rel="prefetch" href="/assets/index.html.0a60cee7.js"><link rel="prefetch" href="/assets/index.html.9db852ce.js"><link rel="prefetch" href="/assets/index.html.6bf09f74.js"><link rel="prefetch" href="/assets/20220831.html.0bcc103b.js"><link rel="prefetch" href="/assets/index.html.73548f7c.js"><link rel="prefetch" href="/assets/index.html.0a380d3d.js"><link rel="prefetch" href="/assets/index.html.9758f34a.js"><link rel="prefetch" href="/assets/SUMMARY.html.4b00f13a.js"><link rel="prefetch" href="/assets/anonymous-mining.html.3237651f.js"><link rel="prefetch" href="/assets/index.html.44327005.js"><link rel="prefetch" href="/assets/20220831.html.db6e92f5.js"><link rel="prefetch" href="/assets/index.html.6a92af62.js"><link rel="prefetch" href="/assets/index.html.14419512.js"><link rel="prefetch" href="/assets/index.html.ab8c5d7c.js"><link rel="prefetch" href="/assets/index.html.ebb5588c.js"><link rel="prefetch" href="/assets/platform.html.eb17d86f.js"><link rel="prefetch" href="/assets/index.html.be9cbe4e.js"><link rel="prefetch" href="/assets/index.html.b23f79a5.js"><link rel="prefetch" href="/assets/index.html.995324c2.js"><link rel="prefetch" href="/assets/fork.html.d99cb2ba.js"><link rel="prefetch" href="/assets/kelepool.html.bdfc6a33.js"><link rel="prefetch" href="/assets/knowledge.html.a79ef33a.js"><link rel="prefetch" href="/assets/merge.html.38eb5101.js"><link rel="prefetch" href="/assets/platform.html.e3c347ed.js"><link rel="prefetch" href="/assets/staking-difference.html.431e697c.js"><link rel="prefetch" href="/assets/staking-guide.html.89b972f5.js"><link rel="prefetch" href="/assets/staking-intro.html.c0f408f3.js"><link rel="prefetch" href="/assets/index.html.e5ad30b3.js"><link rel="prefetch" href="/assets/anonymous.html.f81e9682.js"><link rel="prefetch" href="/assets/ladder.html.aaf30b9a.js"><link rel="prefetch" href="/assets/eth-an-quan-shen-ji.html.45ecd39e.js"><link rel="prefetch" href="/assets/terms-of-service.html.f11021e7.js"><link rel="prefetch" href="/assets/0x00address.html.fceb90fa.js"><link rel="prefetch" href="/assets/index.html.de4a1ce8.js"><link rel="prefetch" href="/assets/aleo.html.04f45ee8.js"><link rel="prefetch" href="/assets/fork.html.9e6a9b18.js"><link rel="prefetch" href="/assets/kelepool.html.fbef32b5.js"><link rel="prefetch" href="/assets/knowledge.html.66481f87.js"><link rel="prefetch" href="/assets/merge.html.4263d07d.js"><link rel="prefetch" href="/assets/staking-difference.html.69e0e89a.js"><link rel="prefetch" href="/assets/staking-guide.html.3bf21e97.js"><link rel="prefetch" href="/assets/staking-intro.html.e3b2d064.js"><link rel="prefetch" href="/assets/index.html.b4421eb4.js"><link rel="prefetch" href="/assets/Hardware.html.a482e0e3.js"><link rel="prefetch" href="/assets/index.html.b2c5d905.js"><link rel="prefetch" href="/assets/knowledge.html.291b9fd1.js"><link rel="prefetch" href="/assets/index.html.90864f58.js"><link rel="prefetch" href="/assets/index.html.8dbeedfb.js"><link rel="prefetch" href="/assets/index.html.174c96b1.js"><link rel="prefetch" href="/assets/index.html.9597ce5e.js"><link rel="prefetch" href="/assets/index.html.5beb43e4.js"><link rel="prefetch" href="/assets/1account-registration-and-login.html.a07e23f3.js"><link rel="prefetch" href="/assets/2add-and-change-sub-accounts.html.4d90cf08.js"><link rel="prefetch" href="/assets/3check-earnings-and-payment-status.html.8f19d728.js"><link rel="prefetch" href="/assets/4check-hashrate-and-worker-status.html.ece0a8a2.js"><link rel="prefetch" href="/assets/5create-edit-and-delete-observer-addresses.html.f12255e1.js"><link rel="prefetch" href="/assets/6invite-friends-to-get-rewards.html.7b939f6b.js"><link rel="prefetch" href="/assets/7set-hashrate-alert.html.799540a1.js"><link rel="prefetch" href="/assets/8set-payment-address.html.95bf3531.js"><link rel="prefetch" href="/assets/9supported-currencies-tokens.html.47a9014b.js"><link rel="prefetch" href="/assets/index.html.e34cca09.js"><link rel="prefetch" href="/assets/stake-amount-32-eth-1.html.0a865705.js"><link rel="prefetch" href="/assets/stake-amount-32-eth.html.162c3ff2.js"><link rel="prefetch" href="/assets/index.html.11856f83.js"><link rel="prefetch" href="/assets/knowledge.html.5afd7936.js"><link rel="prefetch" href="/assets/index.html.b99b9e2b.js"><link rel="prefetch" href="/assets/index.html.362e85bf.js"><link rel="prefetch" href="/assets/index.html.be311a75.js"><link rel="prefetch" href="/assets/index.html.bf5b4115.js"><link rel="prefetch" href="/assets/index.html.d4e7c273.js"><link rel="prefetch" href="/assets/index.html.3e208423.js"><link rel="prefetch" href="/assets/eth-deposit-cli.html.b73a7e56.js"><link rel="prefetch" href="/assets/index.html.169dabdf.js"><link rel="prefetch" href="/assets/micro-unstake.html.8b7b801c.js"><link rel="prefetch" href="/assets/micro.html.16210b4a.js"><link rel="prefetch" href="/assets/whale-unstake.html.021ba06b.js"><link rel="prefetch" href="/assets/whale.html.163392d7.js"><link rel="prefetch" href="/assets/withdraw.html.e380d69e.js"><link rel="prefetch" href="/assets/index.html.86ba4c09.js"><link rel="prefetch" href="/assets/Stake.html.eb48a369.js"><link rel="prefetch" href="/assets/Staking.html.b42a9cbd.js"><link rel="prefetch" href="/assets/Supported networks.html.9420636f.js"><link rel="prefetch" href="/assets/cha-kan-shou-yi.html.ade5c462.js"><link rel="prefetch" href="/assets/cha-kan-yan-zheng-jie-dian.html.fca3fa69.js"><link rel="prefetch" href="/assets/cha-kan-zhi-ya-jin-du.html.a90d19c3.js"><link rel="prefetch" href="/assets/ru-he-jie-chu-zhi-ya.html.b29b3d45.js"><link rel="prefetch" href="/assets/index.html.5c8af29f.js"><link rel="prefetch" href="/assets/ledger-install-mina-app.html.b95a46f3.js"><link rel="prefetch" href="/assets/index.html.a84c590e.js"><link rel="prefetch" href="/assets/dns-shi-shi-mo-ru-he-xuan-ze-yi-ge-wen-ding-de-dns.html.c671826e.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ge-ge-bi-zhong-fei-shuai-shi-duo-shao.html.004a5092.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-shi-mo-shi-jian-jie-suan-da-bi.html.a1eb3fec.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-shi-yong-na-zhong-shou-yi-mo-shi.html.77653d06.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-di-zhi-ke-yi-yong-jiao-yi-suo-di-zhi-ma.html.a4ca2c53.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-qi-fueshi-duo-shao.html.00d83799.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-ti-bi-shou-xu-fei-shi-duo-shao.html.885fa8e9.js"><link rel="prefetch" href="/assets/ke-le-kuang-chi-zai-hai-wai-you-mei-you-wa-kuang-di-zhi.html.d8bdc585.js"><link rel="prefetch" href="/assets/kuang-ti-lian-jie-bu-shang-shi-shi-mo-yuan-yin.html.16850c77.js"><link rel="prefetch" href="/assets/lian-jie-shang-kuang-chi-hou-duo-jiu-ke-yi-kan-dao-suan-li.html.4a021126.js"><link rel="prefetch" href="/assets/mei-dao-qi-fueke-yi-ti-bi-ma.html.8ce14a4a.js"><link rel="prefetch" href="/assets/ru-he-pei-zhi-qi-fuedu.html.a8a5b16e.js"><link rel="prefetch" href="/assets/vpn-he-kuang-ti-you-shi-mo-qu-bie.html.9204494e.js"><link rel="prefetch" href="/assets/wei-shi-mo-ke-le-kuang-chi-wang-zhan-da-bu-kai.html.efd803c6.js"><link rel="prefetch" href="/assets/wei-shi-mo-wo-wa-de-bi-mei-you-zhi-fu.html.58faa953.js"><link rel="prefetch" href="/assets/BTC.html.f55ce061.js"><link rel="prefetch" href="/assets/CKB.html.a97b80b5.js"><link rel="prefetch" href="/assets/ETC.html.b30f3c41.js"><link rel="prefetch" href="/assets/HNS.html.76d54c5c.js"><link rel="prefetch" href="/assets/KDA.html.0f19c07c.js"><link rel="prefetch" href="/assets/LTC.html.7564ac4d.js"><link rel="prefetch" href="/assets/index.html.f3016c8e.js"><link rel="prefetch" href="/assets/RVN.html.a4bd9eb6.js"><link rel="prefetch" href="/assets/STC.html.df515194.js"><link rel="prefetch" href="/assets/index.html.609b6afc.js"><link rel="prefetch" href="/assets/aceminer-wa-kuang-jiao-cheng.html.fe0320d8.js"><link rel="prefetch" href="/assets/hiveos-wa-kuang-jiao-cheng.html.174717ac.js"><link rel="prefetch" href="/assets/kai-yuan-kuang-gong-wa-kuang-jiao-cheng.html.fdcef6da.js"><link rel="prefetch" href="/assets/mineros-wa-kuang-jiao-cheng.html.f7b993d9.js"><link rel="prefetch" href="/assets/qing-song-kuang-gong-shi-yong-jiao-cheng.html.43748385.js"><link rel="prefetch" href="/assets/stcbox-ka-shua-liu-cheng.html.344ee58e.js"><link rel="prefetch" href="/assets/stcbox1.html.0e123d30.js"><link rel="prefetch" href="/assets/Supported currency.html.a896ff5d.js"><link rel="prefetch" href="/assets/account.html.22c1cead.js"><link rel="prefetch" href="/assets/cha-kan-shou-yi-zhi-fu-zhuang-tai.html.e8f5a9f8.js"><link rel="prefetch" href="/assets/cha-kan-suan-li-kuang-ji-qing-kuang.html.d8647fb9.js"><link rel="prefetch" href="/assets/chuang-jian-xiu-gai-shan-chu-guan-cha-zhe-di-zhi.html.89f861eb.js"><link rel="prefetch" href="/assets/collection.html.1746737a.js"><link rel="prefetch" href="/assets/warning.html.9c397725.js"><link rel="prefetch" href="/assets/yao-qing-hao-you-huo-qu-jiang-li.html.d3bfe8a7.js"><link rel="prefetch" href="/assets/zhang-hu-zhu-ce-ji-deng-lu.html.0114dc13.js"><link rel="prefetch" href="/assets/zi-zhu-ti-bi.html.7556770b.js"><link rel="prefetch" href="/assets/404.html.b88479d0.js"><link rel="prefetch" href="/assets/404.50551ceb.js"><link rel="prefetch" href="/assets/Layout.789aaabb.js"><link rel="prefetch" href="/assets/home.26aa8f13.js">
    <link rel="stylesheet" href="/assets/style.d12785ce.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/zh/" class=""><img class="logo" src="/images/logo.png" alt="可乐矿池"><span class="site-name can-hide">可乐矿池</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/zh/guides/" class="" aria-label="挖矿指南"><!--[--><!--]--> 挖矿指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/announcements/" class="" aria-label="公告"><!--[--><!--]--> 公告 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/wiki/" class="" aria-label="百科"><!--[--><!--]--> 百科 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/developers/" class="router-link-active" aria-label="开发者文档"><!--[--><!--]--> 开发者文档 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://www.kelepool.com" rel="noopener noreferrer" target="_blank" aria-label="官方网站"><!--[--><!--]--> 官方网站 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/kelepool/docs.kelepool.com" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><!----><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/zh/guides/" class="" aria-label="挖矿指南"><!--[--><!--]--> 挖矿指南 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/announcements/" class="" aria-label="公告"><!--[--><!--]--> 公告 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/wiki/" class="" aria-label="百科"><!--[--><!--]--> 百科 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/zh/developers/" class="router-link-active" aria-label="开发者文档"><!--[--><!--]--> 开发者文档 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://www.kelepool.com" rel="noopener noreferrer" target="_blank" aria-label="官方网站"><!--[--><!--]--> 官方网站 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="Select language"><span class="title">语言</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="Select language"><span class="title">语言</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/" class="" aria-label="English"><!--[--><!--]--> English <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html" class="router-link-active router-link-exact-active router-link-active" aria-label="简体中文"><!--[--><!--]--> 简体中文 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/kelepool/docs.kelepool.com" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading active collapsible">Ethereum <span class="down arrow"></span></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/zh/developers/ethereum/faq/" class="sidebar-item" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="硬件钱包或APP如何集成质押接口？"><!--[--><!--]--> 硬件钱包或APP如何集成质押接口？ <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#大额质押" class="router-link-active router-link-exact-active sidebar-item" aria-label="大额质押"><!--[--><!--]--> 大额质押 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#第一步-eth1地址转eth2提款凭证" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一步：ETH1地址转ETH2提款凭证"><!--[--><!--]--> 第一步：ETH1地址转ETH2提款凭证 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#第二步-请求可乐矿池api" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二步：请求可乐矿池API"><!--[--><!--]--> 第二步：请求可乐矿池API <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#第三步-调用合约质押" class="router-link-active router-link-exact-active sidebar-item" aria-label="第三步：调用合约质押"><!--[--><!--]--> 第三步：调用合约质押 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#小额质押" class="router-link-active router-link-exact-active sidebar-item" aria-label="小额质押"><!--[--><!--]--> 小额质押 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#第一步-用户地址注册" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一步：用户地址注册"><!--[--><!--]--> 第一步：用户地址注册 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#第二步-调用合约质押" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二步：调用合约质押"><!--[--><!--]--> 第二步：调用合约质押 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/zh/developers/ethereum/api/Hardware.html#大额质押设置合作商手续费及收款地址" class="router-link-active router-link-exact-active sidebar-item" aria-label="大额质押设置合作商手续费及收款地址"><!--[--><!--]--> 大额质押设置合作商手续费及收款地址 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/zh/developers/ethereum/introductions/" class="sidebar-item" aria-label="什么是ETH2.0质押？"><!--[--><!--]--> 什么是ETH2.0质押？ <!--[--><!--]--></a><!----></li><li><a href="/zh/developers/ethereum/contracts/" class="sidebar-item" aria-label="如何调用智能合约质押？"><!--[--><!--]--> 如何调用智能合约质押？ <!--[--><!--]--></a><!----></li><li><a href="/zh/developers/ethereum/api/" class="router-link-active sidebar-item" aria-label="如何查询用户质押信息？"><!--[--><!--]--> 如何查询用户质押信息？ <!--[--><!--]--></a><!----></li><li><a href="/zh/developers/ethereum/api/knowledge.html" class="sidebar-item" aria-label="涨姿势：钱包怎样安全的参与到 ETH Staking 浪潮中?"><!--[--><!--]--> 涨姿势：钱包怎样安全的参与到 ETH Staking 浪潮中? <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">Mina <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/zh/developers/mina/api/" class="sidebar-item" aria-label="API Reference"><!--[--><!--]--> API Reference <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading collapsible">PlatON <span class="right arrow"></span></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a href="/zh/developers/platon/api/" class="sidebar-item" aria-label="API Reference"><!--[--><!--]--> API Reference <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="硬件钱包或app如何集成质押接口" tabindex="-1"><a class="header-anchor" href="#硬件钱包或app如何集成质押接口" aria-hidden="true">#</a> 硬件钱包或APP如何集成质押接口？</h1><p>首先钱包APP需要帮助用户判断、或者让用户选择下边两种质押方式。如果钱包APP决定让用户选择质押方式，就需要提供两个质押入口（大额、小额），并告知用户区别。</p><p>如果钱包APP希望自动帮助用户选择质押方式，也可以在用户质押时候判断质押数量是否大于32，如果大于32则走大额质押流程，反之则走小额质押流程。</p><ul><li>大额质押：用户自己管理提款凭证，最低支持32ETH，最大支持3200ETH，质押量须是32的整数倍。</li><li>小额质押：可乐平台多签管理提款凭证，最低支持0.01ETH，最大支持100000000000ETH。</li></ul><p>Mainnet主网合约：<a href="https://etherscan.io/address/0xACBA4cFE7F30E64dA787c6Dc7Dc34f623570e758#code" target="_blank" rel="noopener noreferrer">0xACBA4cFE7F30E64dA787c6Dc7Dc34f623570e758<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><p>Goerli测试网合约：<a href="https://goerli.etherscan.io/address/0xdCAe38cC28606e61B1e54D8b4b134588e4ca7Ab7#code" target="_blank" rel="noopener noreferrer">0xdCAe38cC28606e61B1e54D8b4b134588e4ca7Ab7<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h2 id="大额质押" tabindex="-1"><a class="header-anchor" href="#大额质押" aria-hidden="true">#</a> 大额质押</h2><h3 id="第一步-eth1地址转eth2提款凭证" tabindex="-1"><a class="header-anchor" href="#第一步-eth1地址转eth2提款凭证" aria-hidden="true">#</a> 第一步：ETH1地址转ETH2提款凭证</h3><p>钱包APP需要使用官方提供的<a href="https://github.com/ethereum/consensus-specs/pull/2149" target="_blank" rel="noopener noreferrer">ETH1_ADDRESS_WITHDRAWAL_PREFIX<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>方式，将用户ETH1存款地址转换成ETH2的提款凭证，注意转换后的提款凭证都是小写字母，具体转换方式如下：</p><ul><li>ETH2提款凭证 = <code>0x01 + 11个00 + 去掉0x的ETH1地址</code></li></ul><div class="language-text ext-text line-numbers-mode"><pre class="language-text"><code>转换例子：
ETH1存款地址：0x5dD3BD08cBc8498C8640Abc26D19480219bB0606
ETH2提款凭证：0x0100000000000000000000005dd3bd08cbc8498c8640abc26d19480219bb0606
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第二步-请求可乐矿池api" tabindex="-1"><a class="header-anchor" href="#第二步-请求可乐矿池api" aria-hidden="true">#</a> 第二步：请求可乐矿池API</h3><h4 id="_1-用户地址注册" tabindex="-1"><a class="header-anchor" href="#_1-用户地址注册" aria-hidden="true">#</a> （1）用户地址注册</h4><h5 id="user-v2-anonymouslogin" tabindex="-1"><a class="header-anchor" href="#user-v2-anonymouslogin" aria-hidden="true">#</a> <a href="https://test-api.kelepool.com/user/v2/anonymouslogin" target="_blank" rel="noopener noreferrer">/user/v2/anonymouslogin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h5><p>此接口只需在用户<strong>第一次质押</strong>的时候调用，当然你也可以在用户每次质押时调用，注意此接口<strong>必须在用户质押前</strong>调用。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>POST https://test-api.kelepool.com/user/v2/anonymouslogin

<span class="token punctuation">{</span>
    // 用户质押钱包地址
    <span class="token string">&quot;payee_addr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0xA49F98416aa4B158c2e752FD8031Fb295D330B22&quot;</span>, 
    // 质押代币（eth）
    <span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;eth&quot;</span>,
    // 数据来源便于商务合作统计（例如：钱包APP）
    <span class="token string">&quot;source&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;钱包APP&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-生成合约大额质押需要的参数" tabindex="-1"><a class="header-anchor" href="#_2-生成合约大额质押需要的参数" aria-hidden="true">#</a> （2）生成合约大额质押需要的参数</h4><h5 id="eth2-v2-validator-keypair" tabindex="-1"><a class="header-anchor" href="#eth2-v2-validator-keypair" aria-hidden="true">#</a> <a href="https://test-api.kelepool.com/eth2/v2/validator/keypair" target="_blank" rel="noopener noreferrer">/eth2/v2/validator/keypair<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h5><p>此接口用于合约大额质押的参数生成，需要传入上面的转换好的ETH提款凭证。由于大额质押是用户自己控制提款密钥，但验证节点需要可乐矿池运营，因此需要调用此接口生成运营节点需要的一些参数，用户质押时需将验证节点参数一起提交至ETH2.0官方存款合约。</p><p>这里请求的参数里有个<code>count</code>，是通过用户质押量计算出来的，下边有计算例子。这里传入了<code>2</code>因此返回了两条验证节点信息，你可能会发现他们的<code>提款凭证</code>都是一样的，未来用户可以通过一个提款凭证对所有节点质押数量和收益提款。由于用户可能在质押时传入了35、100、89这种并非32的倍数数量，因此钱包APP需要计算一下有效质押数量，只允许用户质押32的倍数数量。</p><ul><li>验证节点数量 =<code>（用户质押ETH数量 - （用户质押ETH数量 % 32））/ 32</code></li><li>有效质押数量 = <code>（用户质押ETH数量 - （用户质押ETH数量 % 32））</code></li><li>大额质押手续费 = <code>0.05 * 验证节点数量</code></li></ul><p>假设用户质押了68ETH：</p><ul><li>验证节点数量 = （68 - 68 % 32）/ 32 = 2</li><li>有效质押数量 = （68 - 68 % 32） = 64</li><li>大额质押手续费 = 0.05 * 2 = 0.1ETH</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>POST https://test-api.kelepool.com/eth2/v2/validator/keypair

请求参数：
<span class="token punctuation">{</span>
    // 上面转换好的ETH2提款凭证（去掉0x）
    <span class="token string">&quot;deposit_credentials&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0100000000000000000000005dd3bd08cbc8498c8640abc26d19480219bb0606&quot;</span>,
    // 验证节点数量，计算方式 <span class="token operator">=</span>（用户质押ETH数量 - （用户质押ETH数量 % <span class="token number">32</span>））/ <span class="token number">32</span>
    <span class="token string">&quot;count&quot;</span>:2,
    // 是否重新生成新的keystore。（0<span class="token operator">=</span>否，1<span class="token operator">=</span>是）
    <span class="token string">&quot;recreate&quot;</span>:0
<span class="token punctuation">}</span>

返回值：
<span class="token punctuation">{</span>
    // 整型数字，等于0表示成功，大于0表示失败
    <span class="token string">&quot;code&quot;</span>:0,
    // 失败后返回的消息
    <span class="token string">&quot;message&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;success&quot;</span>,
    <span class="token string">&quot;data&quot;</span>:<span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            // 验证者公钥
            <span class="token string">&quot;pubkey&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;86ee4eecf1c83725020cf8667c555b286b54445691da44aa7a671b6d18abf118452e60876216f9adec5e64ff09c3e231&quot;</span>,
            // 提款凭证
            <span class="token string">&quot;withdrawal_credentials&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0100000000000000000000005dd3bd08cbc8498c8640abc26d19480219bb0606&quot;</span>,
            // 验证者签名
            <span class="token string">&quot;signature&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;a61e5ed96b5b22ec9da92cf3f09c24cf9230ec1db99918e9dedfc9440de473f64b7520b5fb40558d0bc9f009dd20731917c3dbf6b3cfd98b48377a190d9e2959df3d2fa2dcec9c09e8be420accc9daa25301d4a2ce1636a5413ac066e7a4628f&quot;</span>,
            // 默克尔树根
            <span class="token string">&quot;deposit_data_root&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;ebb84a75e241501cc64c4e42dd3cdb7a2f72e6af60ab828b2fb246905eb629e5&quot;</span>,
            // ETH网络
            <span class="token string">&quot;network_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Goerli&quot;</span>
        <span class="token punctuation">}</span>,
        <span class="token punctuation">{</span>
            <span class="token string">&quot;pubkey&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;83909737754d15dd3ad1281a3f0e62baa64d3c0abb3ed218c3baf7ff250058a24fe1143a5243c3b015e3f93ed6af1e18&quot;</span>,
            <span class="token string">&quot;withdrawal_credentials&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0100000000000000000000005dd3bd08cbc8498c8640abc26d19480219bb0606&quot;</span>,
            <span class="token string">&quot;signature&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;b95af475d67e8438e49cfaad12dacd789c705938fd6a8fee93a1a170ef6322c2cf37c643d1d010b23734c04e9028b58d034435dd6c9f19610090bfdefb7522c69e99b0a7830f6d967f1d07e3ff30128c8b516d40232e5595ac91d746420da993&quot;</span>,
            <span class="token string">&quot;deposit_data_root&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;f08ca526395300d60ccc6db28d931ba129944f44d4bb92c773424e120dde222b&quot;</span>,
            <span class="token string">&quot;network_name&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;Goerli&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第三步-调用合约质押" tabindex="-1"><a class="header-anchor" href="#第三步-调用合约质押" aria-hidden="true">#</a> 第三步：调用合约质押</h3><p>得到上面返回的的验证者公钥数据后，我们就可以调用合约进行大额质押了。上面按质押量计算出验证节点数量为<code>2</code>，因此API接口返回了两条验证节点数据，我们调用合约时需要将这两条数据组合一下，再传入合约。具体请参考下边的js代码。</p><ul><li>用户质押64ETH，得出<code>64 / 32 = 2</code>，那么用户需要额外准备<code>0.05 * 2 = 0.1ETH</code>的手续费</li><li>因此用户转入合约的数量变成了<code>64.1ETH</code>，低于或高于这个数量合约都会拒收</li><li>可乐矿池每个验证节点收取一次fee，运营fee的有效期为ETH2.0上线，之后可乐矿池将视情况收费</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>

<span class="token comment">// 导入库</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ethers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ethers&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 连接Metamask钱包</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>Web3Provider</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span>
<span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;eth_requestAccounts&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> signer <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">getSigner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> userAddress <span class="token operator">=</span> <span class="token keyword">await</span> signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 初始化合约参数</span>
<span class="token keyword">const</span> kelepool <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;0xdCAe38cC28606e61B1e54D8b4b134588e4ca7Ab7&quot;</span><span class="token punctuation">,</span><span class="token comment">// 可乐矿池【代理合约】，这里必须是代理合约！！！</span>
  <span class="token literal-property property">abi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;anonymous&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token operator">...</span><span class="token punctuation">.</span>　<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment">// 将上面的合约ABI数组放到这里,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span>kelepool<span class="token punctuation">.</span>address<span class="token punctuation">,</span> kelepool<span class="token punctuation">.</span>abi<span class="token punctuation">,</span> signer<span class="token punctuation">)</span><span class="token punctuation">;</span>


<span class="token comment">// 组装大额质押数据</span>
<span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token comment">// /eth2/v2/validator/keypair API返回的data对象</span>
<span class="token keyword">let</span> stakingPublicKey <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token keyword">let</span> stakingSignature <span class="token operator">=</span> <span class="token string">&#39;&#39;</span>
<span class="token keyword">let</span> stakingCredentials <span class="token operator">=</span> <span class="token string">&#39;0100000000000000000000005dd3bd08cbc8498c8640abc26d19480219bb0606&#39;</span> <span class="token comment">// 用户提款凭证</span>
<span class="token keyword">let</span> stakingRoot <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> validator <span class="token operator">=</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
    stakingPublicKey <span class="token operator">+=</span> validator<span class="token punctuation">.</span>pubkey <span class="token comment">// 拼接公钥字符串</span>
    stakingSignature <span class="token operator">+=</span> validator<span class="token punctuation">.</span>signature <span class="token comment">// 拼接签名字符串</span>
    stakingRoot<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">&#39;0x&#39;</span> <span class="token operator">+</span> validator<span class="token punctuation">.</span>deposit_data_root<span class="token punctuation">)</span> <span class="token comment">// 拼接默克尔树字符串</span>
<span class="token punctuation">}</span>

<span class="token comment">// 生成大额质押合约参数</span>
<span class="token keyword">let</span> prefix <span class="token operator">=</span> <span class="token string">&#39;0x&#39;</span>
<span class="token keyword">let</span> pubkey <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> stakingPublicKey<span class="token punctuation">)</span>
<span class="token keyword">let</span> withdrawal_credentials <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> stakingCredentials<span class="token punctuation">)</span>
<span class="token keyword">let</span> signature <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> stakingSignature<span class="token punctuation">)</span>
<span class="token keyword">let</span> deposit_data_root <span class="token operator">=</span> stakingRoot

<span class="token comment">// 执行合约大额质押方法，最低质押32ETH，这里我们质押64ETH，由于每个节点需要0.05ETH手续费，因此2个节点需要质押64.1ETH</span>
<span class="token keyword">let</span> amount <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">parseUnits</span><span class="token punctuation">(</span><span class="token string">&#39;64.1&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;ether&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 以下是V1版本（已经弃用），无法传递source渠道参数。</span>
<span class="token comment">// source渠道参数是可乐矿池分配给第三方渠道的标识，用于分红统计时区分是哪个渠道过来的质押金额。</span>
<span class="token comment">// 使用V1版本必须在用户质押前先请求：用户地址注册接口（/user/v2/anonymouslogin）建立用户地址与source渠道的关联，我们才能区分渠道质押金额。</span>
<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">createValidator</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> pubkey<span class="token punctuation">,</span> withdrawal_credentials<span class="token punctuation">,</span> signature<span class="token punctuation">,</span> deposit_data_root<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> userAddress<span class="token punctuation">,</span> <span class="token comment">// 调用者账号</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> amount<span class="token punctuation">,</span><span class="token comment">// 质押金额</span>
    <span class="token literal-property property">gasLimit</span><span class="token operator">:</span> <span class="token number">10000000</span> <span class="token comment">// 最大Gas限制</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 以下是V2版本（推荐使用），可以传递source渠道参数。</span>
<span class="token comment">// source渠道参数是可乐矿池分配给第三方渠道的标识，用于分红统计时区分是哪个渠道过来的质押金额。</span>
<span class="token comment">// 如果你之前接入了V1版本也没关系，更新成V2版本后，用户质押完成会优先写入从合约传递过来的source。</span>
<span class="token keyword">let</span> source <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">formatBytes32String</span><span class="token punctuation">(</span><span class="token string">&quot;ThirdParty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">createValidatorV2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> source<span class="token punctuation">,</span> pubkey<span class="token punctuation">,</span> withdrawal_credentials<span class="token punctuation">,</span> signature<span class="token punctuation">,</span> deposit_data_root<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> userAddress<span class="token punctuation">,</span> <span class="token comment">// 调用者账号</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> amount<span class="token punctuation">,</span><span class="token comment">// 质押金额</span>
    <span class="token literal-property property">gasLimit</span><span class="token operator">:</span> <span class="token number">10000000</span> <span class="token comment">// 最大Gas限制</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>


console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">大额质押交易哈希: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tx<span class="token punctuation">.</span>hash<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="小额质押" tabindex="-1"><a class="header-anchor" href="#小额质押" aria-hidden="true">#</a> 小额质押</h2><h3 id="第一步-用户地址注册" tabindex="-1"><a class="header-anchor" href="#第一步-用户地址注册" aria-hidden="true">#</a> 第一步：用户地址注册</h3><h4 id="user-v2-anonymouslogin-1" tabindex="-1"><a class="header-anchor" href="#user-v2-anonymouslogin-1" aria-hidden="true">#</a> <a href="https://test-api.kelepool.com/user/v2/anonymouslogin" target="_blank" rel="noopener noreferrer">/user/v2/anonymouslogin<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></h4><p>此接口只需在用户<strong>第一次质押</strong>的时候调用，当然你也可以在用户每次质押时调用，注意此接口<strong>必须在用户质押前</strong>调用。</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>POST https://test-api.kelepool.com/user/v2/anonymouslogin

<span class="token punctuation">{</span>
    // 用户质押钱包地址
    <span class="token string">&quot;payee_addr&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;0xA49F98416aa4B158c2e752FD8031Fb295D330B22&quot;</span>, 
    // 质押代币（eth）
    <span class="token string">&quot;token&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;eth&quot;</span>,
    // 数据来源便于商务合作统计（例如：钱包APP）
    <span class="token string">&quot;source&quot;</span><span class="token builtin class-name">:</span><span class="token string">&quot;钱包APP&quot;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="第二步-调用合约质押" tabindex="-1"><a class="header-anchor" href="#第二步-调用合约质押" aria-hidden="true">#</a> 第二步：调用合约质押</h3><p>小额质押非常简单，只需要将代币存入可乐矿池智能合约。用户最低可以质押0.01ETH，最大可以质押无限数量的ETH，待合约中小额总质押数量累计超过32ETH后，可乐矿池会使用<a href="https://github.com/ethereum/staking-deposit-cli" target="_blank" rel="noopener noreferrer">以太坊官方CLI工具<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>在冷钱包中生成提款凭证，同时自动创建验证节点。用户的资金由可乐矿池管理及保障安全，等待未来ETH2.0正式上线后，可乐矿池会为用户开放提现接口。</p><ul><li>假设我们打算质押<code>125.0172ETH</code>，质押后可乐矿池会立即创建<code>3个验证节点</code>（每个32ETH）</li><li>合约中将剩余<code>29.0172ETH</code>等待质押，待其他用户质押凑够<code>32ETH</code>后会再创建验证节点</li></ul><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">// 导入库</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> ethers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;ethers&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// 连接Metamask钱包</span>
<span class="token keyword">const</span> provider <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>providers<span class="token punctuation">.</span>Web3Provider</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>ethereum<span class="token punctuation">)</span>
<span class="token keyword">await</span> provider<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&quot;eth_requestAccounts&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> signer <span class="token operator">=</span> provider<span class="token punctuation">.</span><span class="token function">getSigner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> userAddress <span class="token operator">=</span> <span class="token keyword">await</span> signer<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 初始化合约参数</span>
<span class="token keyword">const</span> kelepool <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">address</span><span class="token operator">:</span> <span class="token string">&quot;0xdCAe38cC28606e61B1e54D8b4b134588e4ca7Ab7&quot;</span><span class="token punctuation">,</span><span class="token comment">// 可乐矿池【代理合约】，这里必须是代理合约！！！</span>
  <span class="token literal-property property">abi</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span><span class="token string-property property">&quot;anonymous&quot;</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token operator">...</span><span class="token punctuation">.</span>　<span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token comment">// 将上面的合约ABI数组放到这里,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> contract <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ethers<span class="token punctuation">.</span>Contract</span><span class="token punctuation">(</span>kelepool<span class="token punctuation">.</span>address<span class="token punctuation">,</span> kelepool<span class="token punctuation">.</span>abi<span class="token punctuation">,</span> signer<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 执行合约小额质押方法，最低质押0.01 ETH，这里我们质押125.0172ETH</span>
<span class="token keyword">let</span> amount <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">parseUnits</span><span class="token punctuation">(</span><span class="token string">&quot;125.0172&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;ether&#39;</span><span class="token punctuation">)</span>

<span class="token comment">// 以下是V1版本（已经弃用），无法传递source渠道参数。</span>
<span class="token comment">// source渠道参数是可乐矿池分配给第三方渠道的标识，用于分红统计时区分是哪个渠道过来的质押金额。</span>
<span class="token comment">// 使用V1版本必须在用户质押前先请求：用户地址注册接口（/user/v2/anonymouslogin）建立用户地址与source渠道的关联，我们才能区分渠道质押金额。</span>
<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">deposit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> userAddress<span class="token punctuation">,</span> <span class="token comment">// 调用者账号</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> amount<span class="token punctuation">,</span><span class="token comment">// 质押金额</span>
    <span class="token literal-property property">gasLimit</span><span class="token operator">:</span> <span class="token number">10000000</span> <span class="token comment">// 最大Gas限制</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 以下是V2版本（推荐使用），可以传递source渠道参数。</span>
<span class="token comment">// source渠道参数是可乐矿池分配给第三方渠道的标识，用于分红统计时区分是哪个渠道过来的质押金额。</span>
<span class="token comment">// 如果你之前接入了V1版本也没关系，更新成V2版本后，用户质押完成会优先写入从合约传递过来的source。</span>
<span class="token keyword">let</span> source <span class="token operator">=</span> ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">arrayify</span><span class="token punctuation">(</span>ethers<span class="token punctuation">.</span>utils<span class="token punctuation">.</span><span class="token function">formatBytes32String</span><span class="token punctuation">(</span><span class="token string">&quot;ThirdParty&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> tx <span class="token operator">=</span> <span class="token keyword">await</span> contract<span class="token punctuation">.</span><span class="token function">depositV2</span><span class="token punctuation">(</span>source<span class="token punctuation">,</span><span class="token punctuation">{</span>
    <span class="token literal-property property">from</span><span class="token operator">:</span> userAddress<span class="token punctuation">,</span> <span class="token comment">// 调用者账号</span>
    <span class="token literal-property property">value</span><span class="token operator">:</span> amount<span class="token punctuation">,</span><span class="token comment">// 质押金额</span>
    <span class="token literal-property property">gasLimit</span><span class="token operator">:</span> <span class="token number">10000000</span> <span class="token comment">// 最大Gas限制</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">小额质押交易哈希: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>tx<span class="token punctuation">.</span>hash<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>


</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="大额质押设置合作商手续费及收款地址" tabindex="-1"><a class="header-anchor" href="#大额质押设置合作商手续费及收款地址" aria-hidden="true">#</a> 大额质押设置合作商手续费及收款地址</h2><p>1.合作商可以联系可乐矿池设置大额质押手续、渠道标记、收款地址、费用类型等，质押完成后合约自动将手续费转入合作商设置的收款地址，可乐矿池目前按每个验证节点收取0.05ETH手续费。</p><ul><li><p>若用户质押时的source与合作商设置的partner渠道标记匹配，合约将要求用户支付合作商手续费</p></li><li><p>合作商可通过合约的getPartnerInfo查询自己的手续费信息</p></li><li><p>合作商未设置手续费或手续费设置为0，默认每个节点收取0.05手续费</p></li></ul><p>2.收取手续费有两种方式（以用户一次质押10个验证节点，合作商设置0.1ETH手续费为例）</p><ul><li><p>按节点数量收取：合约将收取1.5ETH手续费，其中0.5ETH给可乐矿池，1ETH自动转给合作商</p></li><li><p>按每次质押收取：合约将收取0.6ETH手续费，其中0.5ETH给可乐矿池，0.1ETH自动转给合作商</p></li></ul></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/kelepool/docs.kelepool.com/edit/main/src/zh/developers/ethereum/api/Hardware.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!----><!----></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/zh/developers/ethereum/faq/" class="" aria-label="常见问题"><!--[--><!--]--> 常见问题 <!--[--><!--]--></a></span><span class="next"><a href="/zh/developers/ethereum/introductions/" class="" aria-label="什么是ETH2.0质押？"><!--[--><!--]--> 什么是ETH2.0质押？ <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.aa16d652.js" defer></script>
  </body>
</html>
